<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="theme-color" content="#0b1020" />
  <title>Penalty Unlimited HackBot — SkySoft</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#0b1020; --panel:#121936; --muted:#7f8db3; --text:#e8eeff; --accent:#66e6a3; --accent2:#8ad1ff; --warning:#ffcc66; --danger:#ff6b6b;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;font-family:Inter,system-ui,Segoe UI,Roboto,Arial,sans-serif;background:
      radial-gradient(1200px 800px at 80% -10%,rgba(138,209,255,.2),transparent),
      linear-gradient(180deg,#0b1020,#0b1020);color:var(--text)}
    .wrap{max-width:980px;margin:32px auto;padding:0 16px}
    .card{background:linear-gradient(180deg,#121936,#0d1330);border:1px solid rgba(255,255,255,.06);border-radius:20px;box-shadow:0 8px 40px rgba(0,0,0,.4);overflow:hidden}

    header{padding:18px 16px;border-bottom:1px solid rgba(255,255,255,.06);display:flex;gap:12px;align-items:center}
    .logo{width:40px;height:40px;display:grid;place-items:center;border-radius:12px;background:linear-gradient(135deg, var(--accent), var(--accent2));color:#081019;font-weight:800}
    header h1{font-size:19px;margin:0}
    header p{margin:0;color:var(--muted);font-size:13px}
    .back-btn{
      background:transparent;border:1px solid rgba(255,255,255,.2);color:var(--text);
      font-size:13px;padding:6px 10px;border-radius:8px;cursor:pointer;margin-right:8px;transition:background .2s;
    }
    .back-btn:hover{background:rgba(255,255,255,.1)}

    .grid{display:grid;grid-template-columns:1.1fr .9fr;gap:20px;padding:16px}
    @media (max-width:860px){.grid{grid-template-columns:1fr;gap:14px;padding:12px}}

    .panel{background:rgba(255,255,255,.03);border:1px solid rgba(255,255,255,.06);border-radius:16px;padding:14px}
    .panel h2{margin:0 0 10px;font-size:15px}
    label{display:block;font-size:13px;color:var(--muted);margin:10px 0 6px}
    input[type="time"],input[type="number"],select,input[type="text"]{
      width:100%;background:#0b1024;border:1px solid rgba(255,255,255,.08);color:var(--text);
      padding:12px;border-radius:12px;font-size:16px;outline:none;-webkit-tap-highlight-color:transparent
    }
    input:focus,select:focus{border-color:var(--accent)}
    .row{display:grid;grid-template-columns:1fr 1fr;gap:12px}
    @media (max-width:560px){.row{grid-template-columns:1fr}}

    button{
      appearance:none;border:0;background:linear-gradient(135deg,var(--accent),#10c080);color:#041015;
      padding:12px 16px;border-radius:12px;font-weight:800;letter-spacing:.2px;cursor:pointer;
      box-shadow:0 6px 20px rgba(16,192,128,.35);touch-action:manipulation
    }
    button.secondary{background:transparent;color:var(--text);border:1px dashed rgba(255,255,255,.2);box-shadow:none}
    .actions{display:flex;gap:12px;margin-top:14px}
    @media (max-width:560px){.actions{flex-direction:column} .actions button{width:100%}}

    .sys{font-family:ui-monospace, SFMono-Regular, Menlo, monospace;background:#0a0f22;border:1px solid rgba(255,255,255,.06);
      border-radius:12px;padding:12px;min-height:110px;max-height:230px;overflow:auto;color:#cfe3ff;font-size:13px;line-height:1.5}

    .progress{height:10px;border-radius:999px;background:#0c1230;border:1px solid rgba(255,255,255,.06);overflow:hidden}
    .bar{height:100%;width:0;background:linear-gradient(90deg,var(--accent),var(--accent2));transition:width .25s ease}

    .signals{display:grid;gap:12px}
    .sig{border:1px solid rgba(255,255,255,.06);border-radius:14px;padding:12px;background:rgba(255,255,255,.03)}
    .sig h3{margin:0 0 6px;font-size:15px}
    .sig p{margin:4px 0;color:var(--muted)}
    .badge{display:inline-block;padding:4px 8px;border-radius:999px;font-size:12px;font-weight:700}
    .safe{background:rgba(102,230,163,.15);color:#8bffca;border:1px solid rgba(102,230,163,.5)}
    .risk{background:rgba(255,204,102,.15);color:#ffdf9a;border:1px solid rgba(255,204,102,.5)}
    .coach{background:rgba(138,209,255,.15);color:#d8f0ff;border:1px solid rgba(138,209,255,.5)}

    /* Mini goal sectors */
    .goal{display:grid;grid-template-columns:repeat(3,1fr);gap:6px;margin-top:10px}
    .sector{height:40px;border-radius:10px;background:#0b1024;border:1px solid rgba(255,255,255,.08);display:grid;place-items:center;color:#9fb6ff;font-weight:700}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <header>
        <button onclick="location.href='../../index.html'" class="back-btn">← Back</button>
        <div class="logo">⚽</div>
        <div>
          <h1>Penalty Unlimited HackBot · SkySoft</h1>
          <p>Aim sector tips • cash‑out plans • cadence • simulated sync</p>
        </div>
      </header>

      <div class="grid">
        <!-- Left: Inputs & System Log -->
        <section class="panel">
          <h2>1) Setup</h2>
          <div class="row">
            <div>
              <label for="time">Planned start (HH:MM)</label>
              <input id="time" type="time" required />
            </div>
            <div>
              <label for="stake">Stake (LKR)</label>
              <input id="stake" type="number" min="50" step="10" placeholder="e.g. 2400" />
            </div>
          </div>
          <div class="row">
            <div>
              <label for="difficulty">Difficulty</label>
              <select id="difficulty">
                <option value="easy">Easy</option>
                <option value="medium" selected>Medium</option>
                <option value="hard">Hard</option>
              </select>
            </div>
            <div>
              <label for="label">Optional label</label>
              <input id="label" type="text" placeholder="Evening run / Test" />
            </div>
          </div>

          <div class="actions">
            <button id="generate">Generate Plan</button>
            <button id="clear" class="secondary">Clear</button>
          </div>

          <h2 style="margin-top:14px">2) System sync</h2>
          <div class="progress" aria-hidden="true"><div class="bar" id="bar"></div></div>
          <div class="sys" id="syslog" aria-live="polite"></div>
        </section>

        <!-- Right: Output pack -->
        <section class="panel">
          <h2>3) Strategy pack</h2>
          <div class="signals" id="signals">
            <div class="small">No plan yet. Set time/stake/difficulty, then press <span class="hint">Generate Plan</span>.</div>
          </div>

          <div class="goal" id="goalViz" aria-hidden="true">
            <div class="sector" id="s0">TL</div>
            <div class="sector" id="s1">TC</div>
            <div class="sector" id="s2">TR</div>
            <div class="sector" id="s3">CL</div>
            <div class="sector" id="s4">CC</div>
            <div class="sector" id="s5">CR</div>
            <div class="sector" id="s6">BL</div>
            <div class="sector" id="s7">BC</div>
            <div class="sector" id="s8">BR</div>
          </div>
        </section>
      </div>

      <div class="footer">
        <div>Cash‑out flips series to profit; avoid greed on Hard. Respect stop after 2 misses.</div>
        <div>Penalty v0.1 prototype</div>
      </div>
    </div>
  </div>

  <script>
    const $ = s => document.querySelector(s);
    const log = (m)=>{ const box=$('#syslog'); box.innerHTML += m + "\\n"; box.scrollTop = box.scrollHeight; };

    function seededRand(seed){
      let x = 1779033703 ^ seed.length;
      for(let i=0;i<seed.length;i++) x = Math.imul(x ^ seed.charCodeAt(i), 3432918353) >>> 0;
      x ^= x >>> 13; x = Math.imul(x, 3266489909) >>> 0; x ^= x >>> 16;
      return ()=> (x = (x + 0x6D2B79F5) >>> 0, (x ^ (x>>>15)) / 2**32);
    }
    function tfmt(t){ if(!t) return ""; const [h,m]=t.split(':'); return `${(""+h).padStart(2,'0')}:${(""+m).padStart(2,'0')}`; }

    function simulateSync(){
      $('#syslog').textContent = '';
      const bar = $('.bar'); bar.style.width = '0%';
      const t = $('#time').value || '—';
      const st = $('#stake').value || '—';
      const diff = $('#difficulty').value;
      log('> Connecting to Penalty engine…');
      let p = 0;
      const steps = [
        'Handshake OK',
        'Fetching recent save/goal pattern…',
        `Difficulty ${diff} · Stake ${st}`,
        'Analyzing aim sectors…',
        'Analyst note compiled',
        'Plan package: READY'
      ];
      const timer = setInterval(()=>{
        p += Math.random()*18+6;
        if(p>=100){ p=100; clearInterval(timer); }
        bar.style.width = p+'%';
        if(steps.length) log('> '+steps.shift());
        if(p===100){ generatePlan(); }
      }, 450);
    }

    function generatePlan(){
      const time = $('#time').value;
      const stake = parseFloat($('#stake').value||'0');
      const diff = $('#difficulty').value; // easy/medium/hard
      const label = ($('#label').value||'').trim();
      const key = `${time}|${stake}|${diff}|${label}`;
      const rnd = seededRand(key);

      // Aim weights per difficulty (чуть разные предпочтения по секторам)
      // Индексы секторов: 0..8 (TL,TC,TR, CL,CC,CR, BL,BC,BR)
      const base = [0.95,1.05,0.95, 1.1,1.0,1.1, 0.9,1.0,0.9];
      const hardShift = [1.05,0.95,1.05, 0.95,1.0,0.95, 1.1,1.05,1.1];
      const easyShift = [1.1,1.05,1.1, 1.0,1.0,1.0, 0.95,0.95,0.95];
      const mult = diff==='hard'? hardShift : diff==='easy'? easyShift : base;

      const weights = [];
      for(let i=0;i<9;i++){
        const noise = 0.8 + rnd()*0.6;
        weights[i] = mult[i]*noise;
      }
      // normalize
      const sum = weights.reduce((a,b)=>a+b,0);
      const probs = weights.map(w=>w/sum);

      // Pick two recommended sectors (primary + alt)
      function pickTopN(arr, n){
        const idx = arr.map((v,i)=>[v,i]).sort((a,b)=>b[0]-a[0]).slice(0,n).map(x=>x[1]);
        return idx;
      }
      const [primary, alt] = pickTopN(probs, 2);

      // Confidence & cadence suggestion (разные на сложностях)
      const confBase = diff==='easy'? 82 : diff==='medium'? 74 : 66;
      const confidence = Math.max(50, Math.min(92, confBase + Math.round((rnd()-0.5)*10)));
      const cadence = diff==='easy'? 1600 : diff==='medium'? 1300 : 1000; // мс между ударами

      // Cash‑out rules (план на 2–3 удара)
      const cashSafe = diff==='easy'? 2 : diff==='medium'? 2 : 1; // после скольки голов кэшаут
      const cashHigh = diff==='easy'? 3 : diff==='medium'? 3 : 2;

      // Analyst notes
      const notes = [
        'Favor corners first; avoid center on first shot.',
        'Keeper trends right after early left hits — rotate sectors.',
        'If first miss: drop stake by 30% next round.',
        'Series profit comes from disciplined cash‑outs, not max chase.'
      ];
      const note = notes[Math.floor(rnd()*notes.length)];

      // Update mini‑goal viz
      document.querySelectorAll('.sector').forEach((el, i)=>{
        el.style.borderColor = 'rgba(255,255,255,.08)';
        el.style.background = '#0b1024';
        el.style.color = '#9fb6ff';
        el.style.transform = 'none';
      });
      function glow(i, col){
        const el = document.getElementById('s'+i);
        if(!el) return;
        el.style.borderColor = col;
        el.style.background = 'linear-gradient(180deg, rgba(102,230,163,.18), rgba(138,209,255,.12))';
        el.style.color = '#e8fffb';
        el.style.transform = 'translateY(-2px)';
      }
      glow(primary, 'rgba(102,230,163,.8)');
      glow(alt, 'rgba(138,209,255,.8)');

      // Sector labels map
      const names = ['TL','TC','TR','CL','CC','CR','BL','BC','BR'];

      // Build output
      $('#signals').innerHTML = `
        <div class="sig">
          <h3>Aim Assist <span class="badge coach">RECOMMENDED</span></h3>
          <p><b>Primary sector:</b> ${names[primary]} · <b>Alternative:</b> ${names[alt]}</p>
          <p><b>Confidence:</b> ${confidence}% · <b>Cadence:</b> every ${cadence}ms</p>
          <p class="small">Analyst: ${note}</p>
          <div style="display:flex;gap:8px;margin-top:8px">
            <button class="copy" data-copy="PENALTY AIM — primary ${names[primary]}, alt ${names[alt]}, ${confidence}%">Copy</button>
          </div>
        </div>

        <div class="sig">
          <h3>Cash‑Out Plan <span class="badge safe">SAFE</span></h3>
          <p>Score <b>${cashSafe}</b> goal(s) then <b>claim</b>. Restart new round to protect streak.</p>
          <p class="small">Discipline > greed. Miss = reset stake & re‑sync.</p>
          <div style="display:flex;gap:8px;margin-top:8px">
            <button class="copy" data-copy="PENALTY SAFE — cash out after ${cashSafe} goals">Copy</button>
          </div>
        </div>

        <div class="sig">
          <h3>Cash‑Out Plan <span class="badge risk">HIGH‑RISK</span></h3>
          <p>Push to <b>${cashHigh}</b> consecutive goals before claim. Rotate sectors primary→alt.</p>
          <p class="small">Stop after 1 miss; re‑sync next cycle.</p>
          <div style="display:flex;gap:8px;margin-top:8px">
            <button class="copy" data-copy="PENALTY HIGH — claim after ${cashHigh} goals; rotate sectors">Copy</button>
          </div>
        </div>
      `;
    }

    // events
    $('#generate').addEventListener('click', ()=>{
      if(!$('#time').value){ alert('Please set your planned start time.'); return; }
      simulateSync();
    });
    $('#clear').addEventListener('click', ()=>{
      $('#time').value=''; $('#stake').value=''; $('#difficulty').value='medium'; $('#label').value='';
      $('#syslog').textContent=''; $('.bar').style.width='0%';
      $('#signals').innerHTML = '<div class="small">No plan yet. Set time/stake/difficulty, then press <span class="hint">Generate Plan</span>.</div>';
      document.querySelectorAll('.sector').forEach((el)=>{ 
        el.style.borderColor='rgba(255,255,255,.08)'; el.style.background='#0b1024'; el.style.color='#9fb6ff'; el.style.transform='none';
      });
    });
    document.addEventListener('click', (e)=>{
      const btn = e.target.closest('.copy');
      if(!btn) return;
      const t = btn.getAttribute('data-copy');
      navigator.clipboard.writeText(t).then(()=>{
        btn.textContent = 'Copied!';
        setTimeout(()=>btn.textContent='Copy',1200);
      });
    });
  </script>
</body>
</html>
